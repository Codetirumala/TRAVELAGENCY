<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stacking Cards Animation</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;700&family=DM+Mono:wght@400;500&display=swap');

        :root {
            --card-height: 40vw;
            --card-margin: 4vw;
            
            --numcards: 4;
        }

        body {
            background: #131212;
            color: beige;
            padding-bottom: 20vh;
            margin: 0;
        }

        .container {
            display: grid;
            grid-template-columns: 30% 90%;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .title-section {
            position: sticky;
            top: 20vh;
            height: fit-content;
            padding: 2rem;
        }

        .cards-section {
            padding: 2rem;
        }

        #cards {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            gap: 8vw;
        }

        .card {
            position: sticky;
            top: 20vh;
            padding-top: calc(var(--index) * var(--card-top-offset));
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            border: 1px solid #aa40fa;
            border-radius: 2rem;
          
        }

        .card-content {
            background: black;
            color:beige;
            border-radius: 2rem;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            padding: 3rem;
            gap: 1rem;
           
            transition: transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1);
        }



        .card-icon {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .card-text {
            font-family: 'DM Mono', monospace;
        }

        .card-text h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.5rem;
        }

        .card-text p {
            margin: 0;
            opacity: 0.8;
        }

        h1 {
            font-size: 3rem;
            font-family: 'Cormorant Garamond', serif;
            margin-bottom: 1rem;
        }

        .title-content {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .title-content.active {
            opacity: 1;
            transform: translateY(0);
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .title-section {
                position: relative;
                top: 0;
                text-align: center;
            }
        }

        /* Animation */
        @supports (animation-timeline: works) {
            @scroll-timeline cards-scroll {
                source: selector(body);
                scroll-offsets:
                    selector(#cards) start 1,
                    selector(#cards) start 0;
                start: selector(#cards) start 1;
                end: selector(#cards) start 0;
                time-range: 15s;
            }

            .card {
                --index0: calc(var(--index) - 1);
                --reverse-index: calc(var(--numcards) - var(--index0));
                --reverse-index0: calc(var(--reverse-index) - 1);
            }

            .card-content {
                transform-origin: 50% 0%;
                will-change: transform;
                --duration: calc(var(--reverse-index0) * 3s);
                --delay: calc(var(--index0) * 0.5s);
                animation: var(--duration) ease-in-out scale var(--delay) forwards;
                animation-timeline: cards-scroll;
            }

            @keyframes scale {
                to {
                    transform: scale(calc(1.1 - calc(0.1 * var(--reverse-index))));
                }
            }
        }
    </style>
</head>
<body>
    <div class="test" style="height: 1000px;"></div>
    <div class="container">
        <section class="title-section">
            <div class="title-content" id="titleContent">
                <h1>Stacking Cards</h1>
                <p>Scroll to explore our amazing cards collection. Watch them stack as you scroll!</p>
            </div>
        </section>
        
        <section class="cards-section">
            <ul id="cards">
                <li class="card" id="card-1" style="--index: 1;">
                    <div class="card-content">
                        <div class="card-icon">
                            <img src="https://assets.codepen.io/210284/flower-9.jpg" alt="card-one">
                        </div>
                        <div class="card-text">
                            <h3>Natural Wonders</h3>
                            <p>Discover the hidden beauty in every petal and leaf</p>
                        </div>
                    </div>
                </li>

                <li class="card" id="card-2" style="--index: 2;">
                    <div class="card-content">
                        <div class="card-icon">
                            <img src="https://assets.codepen.io/210284/flower-8.jpg" alt="card-two">
                        </div>
                        <div class="card-text">
                            <h3>Floral Symphony</h3>
                            <p>Where colors dance and nature sings</p>
                        </div>
                    </div>
                </li>

                <li class="card" id="card-3" style="--index: 3;">
                    <div class="card-content">
                        <div class="card-icon">
                            <img src="https://assets.codepen.io/210284/flower-7.jpg" alt="card-three">
                        </div>
                        <div class="card-text">
                            <h3>Garden Dreams</h3>
                            <p>Let your imagination bloom wild and free</p>
                        </div>
                    </div>
                </li>

                <li class="card" id="card-4" style="--index: 4;">
                    <div class="card-content">
                        <div class="card-icon">
                            <img src="https://assets.codepen.io/210284/flower-6.jpg" alt="card-four">
                        </div>
                        <div class="card-text">
                            <h3>Petal Paradise</h3>
                            <p>A journey through nature's finest artwork</p>
                        </div>
                    </div>
                </li>
            </ul>
        </section>
    </div>

    <div class="test" style="height: 1000px;">
        
        
        </div>

    <script>
        const titleContent = document.getElementById('titleContent');
        const cards = document.getElementById('cards');
        
        window.addEventListener('scroll', () => {
            const cardsRect = cards.getBoundingClientRect();
            if(cardsRect.top <= window.innerHeight && cardsRect.bottom >= 0) {
                titleContent.classList.add('active');
            } else {
                titleContent.classList.remove('active');
            }
        });
    </script>
</body>